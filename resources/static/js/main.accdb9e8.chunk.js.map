{"version":3,"sources":["http/helpers.js","http/api.js","Constants.js","components/ListaPratica.js","App.js","WidgetElement.js"],"names":["request","_ref","Object","asyncToGenerator","_regeneratorRuntime","mark","_callee","url","options","haveBodyResponse","response","_args","arguments","wrap","_context","prev","next","length","undefined","fetch","sent","status","abrupt","json","Promise","reject","stop","_x","_x2","apply","this","get","objectSpread","headers","Headers","Content-Type","method","apiListaPratiche","api_regeneratorRuntime","serviceUrl","page","size","concat","_x3","K","ListaPratica","_useState","useState","_useState2","slicedToArray","pratiche","setPratiche","_useState3","first","last","total","current","_useState4","pratichePages","setPratichePages","_useState5","_useState6","isProspect","setIsProspect","getListaPratiche","then","console","log","window","keycloak","token","JSON","parse","atob","split","groups","includes","pagination","totalPages","number","content","catch","e","useEffect","react_default","a","createElement","Fragment","className","Row","Table","responsive","map","pratica","i","key","onClick","event","location","href","guid","id","cliente","dataApertura","prodotto","statoPratica","Col","md","disabled","buttons","firstPageShown","Math","max","lastPageShown","min","push","target","innerText","pagesButtons","targetPage","Number","parseInt","App","ListaPratica_ListaPratica","ATTRIBUTES","getKeycloakInstance","entando","initialized","Keycloak","realm","clientId","WidgetElement","initServiceUrl","getAttribute","mountPoint","document","appendChild","ReactDOM","render","lib","authClient","initOptions","onLoad","src_App","values","HTMLElement","customElements","define"],"mappings":"4jNAAO,IAOMA,EAAO,eAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,IAAAC,KAAG,SAAAC,EAAOC,EAAKC,GAAZ,IAAAC,EAAAC,EAAAC,EAAAC,UAAA,OAAAR,IAAAS,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAqBP,IAArBE,EAAAM,OAAA,QAAAC,IAAAP,EAAA,KAAAA,EAAA,GAAAG,EAAAE,KAAA,EACEG,MAAMZ,EAAKC,GADb,UAEG,OADlBE,EADeI,EAAAM,MAERC,OAFQ,CAAAP,EAAAE,KAAA,eAAAF,EAAAQ,OAAA,SAGZ,IAHY,YAKjBZ,EAASW,QAAU,KAAOX,EAASW,OAAS,KAL3B,CAAAP,EAAAE,KAAA,aAMfP,EANe,CAAAK,EAAAE,KAAA,eAAAF,EAAAQ,OAAA,SAOVZ,EAASa,QAPC,cAAAT,EAAAQ,OAAA,SASZ,IATY,eAAAR,EAAAQ,OAAA,SAWdE,QAAQC,OAAOf,EAASW,SAXV,yBAAAP,EAAAY,SAAApB,MAAH,gBAAAqB,EAAAC,GAAA,OAAA3B,EAAA4B,MAAAC,KAAAlB,YAAA,oxMCJpB,IAAMmB,EAAM,SAACxB,GACX,IAAMC,EAAON,OAAA8B,EAAA,EAAA9B,CAAA,GDJyB,CACtC+B,QAAS,IAAIC,QAAQ,CACnBC,eAAgB,sBCEL,CAEXC,OAAQ,QAEV,OAAOpC,EAAQO,EAAKC,IAIT6B,EAAgB,eAAApC,EAAAC,OAAAC,EAAA,EAAAD,CAAAoC,IAAAjC,KAAG,SAAAC,EAAOiC,EAAYC,EAAMC,GAAzB,OAAAH,IAAAzB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAQ,OAAA,SACvBS,EAAG,GAAAW,OAAIH,EAAJ,0BAAAG,OAAuCF,EAAvC,UAAAE,OAAoDD,KADhC,wBAAA3B,EAAAY,SAAApB,MAAH,gBAAAqB,EAAAC,EAAAe,GAAA,OAAA1C,EAAA4B,MAAAC,KAAAlB,YAAA,GCXhBgC,EAAI,CAEfL,WAAa,8BCIFM,EAAe,WAAM,IAAAC,EACAC,mBAAS,IADTC,EAAA9C,OAAA+C,EAAA,EAAA/C,CAAA4C,EAAA,GACzBI,EADyBF,EAAA,GACfG,EADeH,EAAA,GAAAI,EAEUL,mBAAS,CAACM,OAAO,EAAMC,MAAM,EAAOC,MAAO,EAAGC,QAAS,IAFjEC,EAAAvD,OAAA+C,EAAA,EAAA/C,CAAAkD,EAAA,GAEzBM,EAFyBD,EAAA,GAEVE,EAFUF,EAAA,GAAAG,EAGGb,mBAAS,MAHZc,EAAA3D,OAAA+C,EAAA,EAAA/C,CAAA0D,EAAA,GAGzBE,EAHyBD,EAAA,GAGbE,EAHaF,EAAA,GAM1BG,EAAmB,SAACxB,GACtBH,EAAiBO,EAAEL,WAAYC,EAAM,GAClCyB,KAAK,SAAA1C,GACJ2C,QAAQC,IAAI5C,GAEZwC,OHM0B7C,IAA1BkD,OAAOC,SAASC,OAAuBC,KAAKC,MAAMC,KAAKL,OAAOC,SAASC,MAAMI,MAAM,KAAK,KAAKC,OAAOC,SAAS,cGL7G,IAAMC,EAAa,CAACxB,MAAO9B,EAAK8B,MAAOC,KAAM/B,EAAK+B,KAAMC,MAAOhC,EAAKuD,WAAYtB,QAASjC,EAAKwD,QAC9FpB,EAAiBkB,GACjB1B,EAAY5B,EAAKyD,WAElBC,MAAM,SAAAC,GAAC,OAAIhB,QAAQC,IAAI,oBAkC9B,OAJAgB,oBAAU,WACRnB,EAAiB,IAChB,IAGDoB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,MACkB,IAAfzB,GACCsB,EAAAC,EAAAC,cAAA,OAAKE,UAAW,YACdJ,EAAAC,EAAAC,cAAA,KAAGE,UAAW,kBAAd,gBACAJ,EAAAC,EAAAC,cAAA,KAAGE,UAAW,gBAAd,+BACAJ,EAAAC,EAAAC,cAAA,MAAIE,UAAW,QACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAW,8BACdJ,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAKD,UAAW,wBACdJ,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAOC,YAAU,GACfP,EAAAC,EAAAC,cAAA,SAAOE,UAAW,cAClBJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,gBACAF,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,6BAGFF,EAAAC,EAAAC,cAAA,SAAOE,UAAW,eACjBtC,EAAS0C,IAAI,SAACC,EAASC,GAAV,OACZV,EAAAC,EAAAC,cAAA,MAAIS,IAAKD,EAAGN,UAAW,aACrBJ,EAAAC,EAAAC,cAAA,MAAIE,UAAW,qDACXQ,QAAS,SAAAC,GAAK,OAAI7B,OAAO8B,SAASC,KAAO,0CAA4CN,EAAQO,OAAOP,EAAQQ,IAChHjB,EAAAC,EAAAC,cAAA,MAAIE,UAAW,aAAcK,EAAQS,SACrClB,EAAAC,EAAAC,cAAA,MAAIE,UAAW,QAASK,EAAQU,cAChCnB,EAAAC,EAAAC,cAAA,UAAKO,EAAQW,UACbpB,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,QAAME,UAAW,SAAUK,EAAQY,sBAOjDrB,EAAAC,EAAAC,cAACG,EAAA,EAAD,KACEL,EAAAC,EAAAC,cAACoB,EAAA,EAAD,CAAKC,GAAI,IACTvB,EAAAC,EAAAC,cAACoB,EAAA,EAAD,CAAKC,GAAI,EAAGnB,UAAW,wCACrBJ,EAAAC,EAAAC,cAAA,UAAQsB,SAAUlD,EAAcL,MAAOmC,UAAW9B,EAAcL,MAAQ,kBAAoB,GACpF2C,QAAS,kBAAMhC,EAAiBN,EAAcF,QAAU,KADhE,YApES,SAACD,EAAOyC,GAC3B,IAAIa,EAAU,GACVC,EAAiBC,KAAKC,IAAI,EAAGtD,EAAcF,QAAU,GACrDyD,EAAgBF,KAAKG,IAAI3D,EAAOG,EAAcF,QAAU,GACrC,IAAnBsD,IACFD,EAAQM,KAAK/B,EAAAC,EAAAC,cAAA,UAAQS,IAAK,EAAGC,QAAS,SAACC,GAAD,OAAWD,EAAQC,EAAMmB,OAAOC,aAAzD,MACU,IAAnBP,GACFD,EAAQM,KAAK/B,EAAAC,EAAAC,cAAA,UAAQS,IAAK,aAAcP,UAAW,8BAAtC,SAGjB,IAAK,IAAIM,EAAIgB,EAAgBhB,EAAImB,EAAenB,IAC9Ce,EAAQM,KAAK/B,EAAAC,EAAAC,cAAA,UAAQS,IAAKD,EAAGE,QAAS,SAACC,GAAD,OAAWD,EAAQC,EAAMmB,OAAOC,YACjD7B,UAAW9B,EAAcF,UAAYsC,EAAI,SAAW,IAAKA,EAAI,IAQpF,OANImB,IAAkB1D,IAChB0D,IAAkB1D,EAAQ,GAC5BsD,EAAQM,KAAK/B,EAAAC,EAAAC,cAAA,UAAQS,IAAK,aAAcP,UAAW,8BAAtC,QAEfqB,EAAQM,KAAK/B,EAAAC,EAAAC,cAAA,UAAQS,IAAKxC,EAAQ,EAAGyC,QAAS,SAACC,GAAD,OAAWD,EAAQC,EAAMmB,OAAOC,aAAa9D,KAEtFsD,EAmDIS,CAAa5D,EAAcH,MAjDrB,SAACgE,GAClBvD,EAAiBwD,OAAOC,SAASF,GAAc,KAiDrCnC,EAAAC,EAAAC,cAAA,UAAQsB,SAAUlD,EAAcJ,KAAMkC,UAAW9B,EAAcJ,KAAO,kBAAoB,GAClF0C,QAAS,kBAAMhC,EAAiBN,EAAcF,QAAU,KADhE,eChFCkE,MAbf,WAQE,OACFtC,EAAAC,EAAAC,cAACqC,EAAD,uBCNMC,EAAa,CACjBrF,WAAY,eAGRsF,EAAsB,kBACzBzD,QACCA,OAAO0D,SACP1D,OAAO0D,QAAQzD,UAFhBnE,OAAA8B,EAAA,EAAA9B,CAAA,GAEgCkE,OAAO0D,QAAQzD,SAF/C,CAEyD0D,aAAa,KAAU,CAC/EA,aAAa,IAQX1D,EAAW,IAAI2D,IALE,CACrBC,MAAO,UACPC,SAAU,cACV3H,IAAK,oCAGP6D,OAAOC,SAAWA,MAGZ8D,6MAEJ9D,SAAWwD,wFHrBiB,SAACtF,GAAeK,EAAEL,WAAaA,EG6BzD6F,CADmBtG,KAAKuG,aAAa,gBAGrCvG,KAAKwG,WAAaC,SAASjD,cAAc,OACzCxD,KAAK0G,YAAY1G,KAAKwG,YACtBxG,KAAKuC,SAALnE,OAAA8B,EAAA,EAAA9B,CAAA,GAAoB2H,IAApB,CAA2CE,aAAa,IAExDU,IAASC,OACPtD,EAAAC,EAAAC,cAACqD,EAAA,EAAD,CAAuBC,WAAYvE,EAAUwE,YAAa,CAACC,OAAQ,mBACjE1D,EAAAC,EAAAC,cAACyD,EAAD,OAEJjH,KAAKwG,yDAfL,OAAOpI,OAAO8I,OAAOpB,sBALGqB,cAyB5BC,eAAeC,OAAO,cAAehB","file":"static/js/main.accdb9e8.chunk.js","sourcesContent":["export const getDefaultOptions = () => ({\r\n  headers: new Headers({\r\n    'Content-Type': 'application/json'\r\n  })\r\n});\r\n\r\n\r\nexport const request = async (url, options, haveBodyResponse = true) => {\r\n  const response = await fetch(url, options);\r\n  if (response.status === 204) {\r\n    return {};\r\n  }\r\n  if (response.status >= 200 && response.status < 300) {\r\n    if (haveBodyResponse) {\r\n      return response.json();\r\n    }\r\n    return {};\r\n  }\r\n  return Promise.reject(response.status);\r\n};\r\n\r\n\r\n\r\nexport const getIsProspect = () => {\r\n  return (window.keycloak.token === undefined || JSON.parse(atob(window.keycloak.token.split('.')[1])).groups.includes('/prospect'));\r\n};\r\n\r\nexport const useQuery = () => {\r\n  return new URLSearchParams(window.location.search);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n","import {getDefaultOptions, request} from \"./helpers\";\r\n\r\n\r\nconst get = (url) => {\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n\r\nexport const apiListaPratiche = async (serviceUrl, page, size) => {\r\n  return get(`${serviceUrl}/api/pratica/all?page=${page}&size=${size}`);\r\n};\r\n","\r\nexport const K = {\r\n\r\n  serviceUrl : null,\r\n\r\n\r\n\r\n};\r\n\r\nexport const initServiceUrl = (serviceUrl) => K.serviceUrl = serviceUrl;\r\n\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport {apiListaPratiche} from \"../http/api\";\r\nimport {K} from \"../Constants\";\r\nimport {Col, Row, Table} from \"react-bootstrap\";\r\nimport {getIsProspect} from \"../http/helpers\";\r\n\r\n\r\nexport const ListaPratica = () => {\r\n  const [pratiche, setPratiche] = useState([]);\r\n  const [pratichePages, setPratichePages] = useState({first: true, last: false, total: 1, current: 0})\r\n  const [isProspect, setIsProspect]= useState(null)\r\n\r\n\r\n  const getListaPratiche = (page) => {\r\n      apiListaPratiche(K.serviceUrl, page, 5)\r\n        .then(json => {\r\n          console.log(json)\r\n          // console.log(JSON.parse(atob(window.keycloak.token.split('.')[1])).groups.includes('/prospect')+ \" check\")\r\n          setIsProspect(getIsProspect())\r\n          const pagination = {first: json.first, last: json.last, total: json.totalPages, current: json.number}\r\n          setPratichePages(pagination)\r\n          setPratiche(json.content)\r\n        })\r\n        .catch(e => console.log(\"err get lista\"));\r\n  };\r\n\r\n  const pagesButtons = (total, onClick) => {\r\n    let buttons = [];\r\n    let firstPageShown = Math.max(0, pratichePages.current - 2);\r\n    let lastPageShown = Math.min(total, pratichePages.current + 3);\r\n    if (firstPageShown !== 0) {\r\n      buttons.push(<button key={0} onClick={(event) => onClick(event.target.innerText)}>1</button>);\r\n      if (firstPageShown !== 1) {\r\n        buttons.push(<button key={'prec-pages'} className={'pagination-button-disabled'}>...</button>);\r\n      }\r\n    }\r\n    for (let i = firstPageShown; i < lastPageShown; i++) {\r\n      buttons.push(<button key={i} onClick={(event) => onClick(event.target.innerText)}\r\n                           className={pratichePages.current === i ? 'strong' : ''}>{i + 1}</button>);\r\n    }\r\n    if (lastPageShown !== total) {\r\n      if (lastPageShown !== total - 1) {\r\n        buttons.push(<button key={'foll-pages'} className={'pagination-button-disabled'}>...</button>);\r\n      }\r\n      buttons.push(<button key={total - 1} onClick={(event) => onClick(event.target.innerText)}>{total}</button>);\r\n    }\r\n    return buttons;\r\n  };\r\n  const changePage = (targetPage) => {\r\n    getListaPratiche(Number.parseInt(targetPage) - 1);\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    getListaPratiche(0);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {isProspect === false &&\r\n        <div className={'back-col'}>\r\n          <p className={'list-title m-4'}>Fast Lending</p>\r\n          <p className={'subtitle m-4'}>Lista pratiche Fast Lending</p>\r\n          <hr className={'m-4'}/>\r\n          <div className={'white-rounded-shadowed m-4'}>\r\n            <Row className={\"align-content-center\"}>\r\n              <Table responsive>\r\n                <thead className={'table-head'}>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>CLIENTE</th>\r\n                  <th>DATA APERTURA</th>\r\n                  <th>PRODOTTO</th>\r\n                  <th>STATO PRATICA</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody className={'table-data '}>\r\n                {pratiche.map((pratica, i) =>\r\n                  <tr key={i} className={'table-row'}>\r\n                    <td className={'primary-color id-pointer text-decoration-underline'}\r\n                        onClick={event => window.location.href = \"/entando-de-app/en/dettaglio.page?guid=\" + pratica.guid}>{pratica.id}</td>\r\n                    <td className={\"fw-bolder\"}>{pratica.cliente}</td>\r\n                    <td className={\"data\"}>{pratica.dataApertura}</td>\r\n                    <td>{pratica.prodotto}</td>\r\n                    <td><span className={'stato'}>{pratica.statoPratica}</span></td>\r\n                  </tr>\r\n                )}\r\n                </tbody>\r\n              </Table>\r\n            </Row>\r\n          </div>\r\n          <Row>\r\n            <Col md={8}></Col>\r\n            <Col md={4} className={'mt-2 pagination-button align-to-end '}>\r\n              <button disabled={pratichePages.first} className={pratichePages.first ? 'button-disabled' : ''}\r\n                      onClick={() => getListaPratiche(pratichePages.current - 1)}>Indietro\r\n              </button>\r\n              {pagesButtons(pratichePages.total, changePage)}\r\n              <button disabled={pratichePages.last} className={pratichePages.last ? 'button-disabled' : ''}\r\n                      onClick={() => getListaPratiche(pratichePages.current + 1)}>Avanti\r\n              </button>\r\n            </Col>\r\n          </Row>\r\n\r\n        </div>\r\n      }\r\n\r\n    </>);\r\n\r\n}\r\n\r\n\r\n","import './App.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport React from 'react';\r\nimport {ListaPratica} from \"./components/ListaPratica\";\r\n\r\nfunction App() {\r\n\r\n  // const { keycloak, initialized } = useKeycloak()\r\n  // if (keycloak.authenticated) {\r\n  //   initApplicationConstants();\r\n  //   checkNewUser();\r\n  // }\r\n\r\n  return (\r\n<ListaPratica/>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {initServiceUrl} from \"./Constants\";\r\nimport Keycloak from \"keycloak-js\";\r\nimport {ReactKeycloakProvider} from '@react-keycloak/web'\r\n\r\n\r\nconst ATTRIBUTES = {\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && {...window.entando.keycloak, initialized: true}) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst keycloakConfig = {\r\n  realm: 'entando',\r\n  clientId: 'entando-web',\r\n  url: 'http://34.78.126.51.nip.io/auth'\r\n}\r\nconst keycloak = new Keycloak(keycloakConfig)\r\nwindow.keycloak = keycloak\r\n\r\n\r\nclass WidgetElement extends HTMLElement {\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  static get observedAttributes() {\r\n    return Object.values(ATTRIBUTES);\r\n  }\r\n\r\n  connectedCallback() {\r\n    const serviceUrl = this.getAttribute(\"service-url\")\r\n    initServiceUrl(serviceUrl);\r\n\r\n    this.mountPoint = document.createElement('div');\r\n    this.appendChild(this.mountPoint);\r\n    this.keycloak = {...getKeycloakInstance(), initialized: true};\r\n\r\n    ReactDOM.render(\r\n      <ReactKeycloakProvider authClient={keycloak} initOptions={{onLoad: 'login-required'}}>\r\n        <App/>\r\n       </ReactKeycloakProvider>\r\n  , this.mountPoint);\r\n  }\r\n}\r\n\r\n\r\ncustomElements.define('list-widget', WidgetElement);\r\n\r\nexport default WidgetElement;\r\n\r\n"],"sourceRoot":""}